{% extends "base.html" %}
{% block title %}New Client{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto animate-in">
    <!-- Page Header -->
    <div class="mb-8">
        <a href="/" class="inline-flex items-center gap-1 text-sm text-gray-400 hover:text-brand transition mb-4">
            <span class="material-symbols-outlined text-[16px]">arrow_back</span>
            Back to Dashboard
        </a>
        <h1 class="text-3xl font-bold text-gray-900 tracking-tight">New Client Setup</h1>
        <p class="text-gray-500 mt-1">Enter client details to begin competitive intelligence tracking.</p>
    </div>

    <!-- Progress Bar -->
    <div class="mb-8">
        <div class="flex items-center justify-between mb-2">
            <span class="text-xs font-semibold text-brand" id="progressLabel">Section 1 of 6</span>
            <span class="text-xs text-gray-400" id="progressPercent">0%</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-1.5">
            <div class="stat-gradient-1 h-1.5 rounded-full transition-all duration-500" id="progressBar" style="width: 0%"></div>
        </div>
    </div>

    <form method="POST" action="/clients/new" id="intakeForm">
        <!-- Section 1: Client Info -->
        <div class="glass-card rounded-2xl shadow-sm border border-gray-100 p-6 mb-4 form-section" data-section="1">
            <div class="flex items-center gap-3 mb-5">
                <div class="w-8 h-8 stat-gradient-1 rounded-lg flex items-center justify-center">
                    <span class="text-white text-sm font-bold">1</span>
                </div>
                <h2 class="text-lg font-semibold text-gray-800">Client Information</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">Client Name <span class="text-red-400">*</span></label>
                    <input type="text" name="client_name" required
                        class="w-full border border-gray-200 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition text-sm"
                        placeholder="e.g. Microsoft">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">Client Website <span class="text-red-400">*</span></label>
                    <input type="url" name="client_website" required
                        class="w-full border border-gray-200 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition text-sm"
                        placeholder="https://example.com">
                </div>
            </div>

            <!-- Social Media Handles -->
            <div class="mt-4">
                <label class="block text-sm font-medium text-gray-700 mb-1.5">Social Media Handles</label>
                <div id="socialHandles">
                    <div class="flex gap-2 mb-2">
                        <select name="social_platform[]" class="border border-gray-200 rounded-xl px-3 py-2.5 text-sm bg-white">
                            <option value="linkedin">LinkedIn</option>
                            <option value="x">X (Twitter)</option>
                            <option value="instagram">Instagram</option>
                            <option value="facebook">Facebook</option>
                            <option value="tiktok">TikTok</option>
                            <option value="reddit">Reddit</option>
                        </select>
                        <input type="text" name="social_handle[]"
                            class="flex-1 border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition"
                            placeholder="Handle or URL">
                    </div>
                </div>
                <button type="button" onclick="addSocialHandle('socialHandles', 'social_platform[]', 'social_handle[]')"
                    class="inline-flex items-center gap-1 text-sm text-brand-light hover:text-brand font-medium mt-1">
                    <span class="material-symbols-outlined text-[16px]">add</span>
                    Add another handle
                </button>
            </div>
        </div>

        <!-- Section 2: Reporting -->
        <div class="glass-card rounded-2xl shadow-sm border border-gray-100 p-6 mb-4 form-section" data-section="2">
            <div class="flex items-center gap-3 mb-5">
                <div class="w-8 h-8 stat-gradient-2 rounded-lg flex items-center justify-center">
                    <span class="text-white text-sm font-bold">2</span>
                </div>
                <h2 class="text-lg font-semibold text-gray-800">Reporting Settings</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">Report Frequency <span class="text-red-400">*</span></label>
                    <select name="frequency" required
                        class="w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-white focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition">
                        <option value="monthly">Monthly</option>
                        <option value="fortnightly">Fortnightly</option>
                        <option value="quarterly">Quarterly</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">Auto-Run Reports</label>
                    <label class="flex items-center gap-3 mt-2 cursor-pointer">
                        <div class="relative">
                            <input type="checkbox" name="auto_run" value="1" class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-200 peer-focus:ring-2 peer-focus:ring-brand-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:bg-brand after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                        </div>
                        <span class="text-sm text-gray-600">Generate reports automatically on schedule</span>
                    </label>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">Period Start</label>
                    <input type="date" name="period_start"
                        class="w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">Period End</label>
                    <input type="date" name="period_end"
                        class="w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition">
                </div>
            </div>
        </div>

        <!-- Section 3: Competitors -->
        <div class="glass-card rounded-2xl shadow-sm border border-gray-100 p-6 mb-4 form-section" data-section="3">
            <div class="flex items-center gap-3 mb-5">
                <div class="w-8 h-8 stat-gradient-3 rounded-lg flex items-center justify-center">
                    <span class="text-white text-sm font-bold">3</span>
                </div>
                <h2 class="text-lg font-semibold text-gray-800">Competitors to Track</h2>
            </div>

            <div id="competitors">
                <div class="bg-surface-50 rounded-xl p-5 mb-3 competitor-block border border-gray-100">
                    <div class="flex items-center justify-between mb-4">
                        <span class="inline-flex items-center gap-2 text-sm font-semibold text-gray-600">
                            <span class="material-symbols-outlined text-[16px] text-accent">business</span>
                            Competitor 1
                        </span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-medium text-gray-500 mb-1">Name</label>
                            <input type="text" name="comp_name[]"
                                class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition"
                                placeholder="Competitor name">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-500 mb-1">Website <span class="text-red-400">*</span></label>
                            <input type="url" name="comp_website[]" required
                                class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition"
                                placeholder="https://competitor.com">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-500 mb-1">YouTube URL</label>
                            <input type="url" name="comp_youtube[]"
                                class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition"
                                placeholder="https://youtube.com/@channel">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-500 mb-1">Vimeo URL</label>
                            <input type="url" name="comp_vimeo[]"
                                class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition"
                                placeholder="https://vimeo.com/channel">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-xs font-medium text-gray-500 mb-1">Review Page (Trustpilot, Google Reviews)</label>
                            <input type="url" name="comp_review[]"
                                class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition"
                                placeholder="https://trustpilot.com/review/competitor.com">
                        </div>
                    </div>
                    <div class="mt-3">
                        <label class="block text-xs font-medium text-gray-500 mb-1">Social Media Handles</label>
                        <div class="comp-socials">
                            <div class="flex gap-2 mb-2">
                                <select name="comp_social_platform_0[]" class="border border-gray-200 rounded-xl px-2 py-1.5 text-xs bg-white">
                                    <option value="linkedin">LinkedIn</option>
                                    <option value="x">X (Twitter)</option>
                                    <option value="instagram">Instagram</option>
                                    <option value="facebook">Facebook</option>
                                    <option value="tiktok">TikTok</option>
                                    <option value="reddit">Reddit</option>
                                </select>
                                <input type="text" name="comp_social_handle_0[]"
                                    class="flex-1 border border-gray-200 rounded-xl px-2 py-1.5 text-xs focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition"
                                    placeholder="Handle or URL">
                            </div>
                        </div>
                        <button type="button" onclick="addCompSocial(this)"
                            class="inline-flex items-center gap-1 text-xs text-brand-light hover:text-brand font-medium">
                            <span class="material-symbols-outlined text-[14px]">add</span>
                            Add handle
                        </button>
                    </div>
                </div>
            </div>
            <button type="button" onclick="addCompetitor()"
                class="inline-flex items-center gap-1.5 text-sm text-accent hover:text-brand font-semibold mt-2">
                <span class="material-symbols-outlined text-[18px]">add_circle</span>
                Add another competitor
            </button>
            <p class="text-xs text-gray-400 mt-1 ml-7">You can add up to 50 competitors.</p>
        </div>

        <!-- Section 4: Keywords -->
        <div class="glass-card rounded-2xl shadow-sm border border-gray-100 p-6 mb-4 form-section" data-section="4">
            <div class="flex items-center gap-3 mb-5">
                <div class="w-8 h-8 stat-gradient-4 rounded-lg flex items-center justify-center">
                    <span class="text-white text-sm font-bold">4</span>
                </div>
                <h2 class="text-lg font-semibold text-gray-800">Keywords</h2>
            </div>
            <p class="text-sm text-gray-500 mb-3">Enter keywords to track across Google, ChatGPT, Gemini, YouTube, TikTok, and Instagram. One per line.</p>
            <textarea name="keywords" rows="8"
                class="w-full border border-gray-200 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition resize-none"
                placeholder="keyword 1&#10;keyword 2&#10;keyword 3&#10;..." oninput="updateKeywordCount(this)"></textarea>
            <div class="flex justify-between mt-1.5">
                <p class="text-xs text-gray-400">One keyword per line.</p>
                <p class="text-xs text-gray-400"><span id="keywordCount">0</span> / 1,000 keywords</p>
            </div>
        </div>

        <!-- Section 5: Countries -->
        <div class="glass-card rounded-2xl shadow-sm border border-gray-100 p-6 mb-4 form-section" data-section="5">
            <div class="flex items-center gap-3 mb-5">
                <div class="w-8 h-8 stat-gradient-1 rounded-lg flex items-center justify-center">
                    <span class="text-white text-sm font-bold">5</span>
                </div>
                <h2 class="text-lg font-semibold text-gray-800">Country / Countries</h2>
            </div>
            <p class="text-sm text-gray-500 mb-3">Each country generates a separate report section.</p>
            <div id="countries">
                <div class="flex gap-2 mb-2">
                    <select name="countries[]" class="flex-1 border border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-white focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition">
                        <option value="">-- Select Country --</option>
                        <option value="Singapore">Singapore</option>
                        <option value="Malaysia">Malaysia</option>
                        <option value="Thailand">Thailand</option>
                        <option value="Indonesia">Indonesia</option>
                        <option value="Philippines">Philippines</option>
                        <option value="Vietnam">Vietnam</option>
                        <option value="Australia">Australia</option>
                        <option value="New Zealand">New Zealand</option>
                        <option value="United Kingdom">United Kingdom</option>
                        <option value="United States">United States</option>
                        <option value="Canada">Canada</option>
                        <option value="France">France</option>
                        <option value="Germany">Germany</option>
                        <option value="Japan">Japan</option>
                        <option value="South Korea">South Korea</option>
                        <option value="India">India</option>
                        <option value="UAE">UAE</option>
                        <option value="Saudi Arabia">Saudi Arabia</option>
                        <option value="Hong Kong">Hong Kong</option>
                        <option value="Taiwan">Taiwan</option>
                        <option value="China">China</option>
                        <option value="Brazil">Brazil</option>
                        <option value="Mexico">Mexico</option>
                        <option value="South Africa">South Africa</option>
                        <option value="Nigeria">Nigeria</option>
                        <option value="Egypt">Egypt</option>
                        <option value="Pakistan">Pakistan</option>
                        <option value="Bangladesh">Bangladesh</option>
                        <option value="Italy">Italy</option>
                        <option value="Spain">Spain</option>
                    </select>
                </div>
            </div>
            <button type="button" onclick="addCountry()"
                class="inline-flex items-center gap-1 text-sm text-brand-light hover:text-brand font-medium mt-1">
                <span class="material-symbols-outlined text-[16px]">add</span>
                Add another country
            </button>
            <p class="text-xs text-gray-400 mt-1 ml-6">Min 1, up to 100 countries.</p>
        </div>

        <!-- Section 6: Subscription & Contact -->
        <div class="glass-card rounded-2xl shadow-sm border border-gray-100 p-6 mb-4 form-section" data-section="6">
            <div class="flex items-center gap-3 mb-5">
                <div class="w-8 h-8 stat-gradient-2 rounded-lg flex items-center justify-center">
                    <span class="text-white text-sm font-bold">6</span>
                </div>
                <h2 class="text-lg font-semibold text-gray-800">Subscription & Contact</h2>
            </div>

            <div class="mb-5">
                <label class="block text-sm font-medium text-gray-700 mb-3">Subscription Tier <span class="text-red-400">*</span></label>
                <div class="grid grid-cols-3 gap-3">
                    <label class="relative cursor-pointer">
                        <input type="radio" name="subscription_tier" value="trial" required class="sr-only peer">
                        <div class="p-4 rounded-xl border-2 border-gray-200 peer-checked:border-brand peer-checked:bg-brand-50 transition text-center hover:border-gray-300">
                            <span class="material-symbols-outlined text-gray-400 peer-checked:text-brand text-[24px] mb-1">science</span>
                            <p class="text-sm font-semibold text-gray-700">Trial</p>
                            <p class="text-xs text-gray-400 mt-0.5">1 report</p>
                        </div>
                    </label>
                    <label class="relative cursor-pointer">
                        <input type="radio" name="subscription_tier" value="6month" class="sr-only peer">
                        <div class="p-4 rounded-xl border-2 border-gray-200 peer-checked:border-brand peer-checked:bg-brand-50 transition text-center hover:border-gray-300">
                            <span class="material-symbols-outlined text-gray-400 text-[24px] mb-1">calendar_month</span>
                            <p class="text-sm font-semibold text-gray-700">6-Month</p>
                            <p class="text-xs text-gray-400 mt-0.5">Subscription</p>
                        </div>
                    </label>
                    <label class="relative cursor-pointer">
                        <input type="radio" name="subscription_tier" value="1year" class="sr-only peer">
                        <div class="p-4 rounded-xl border-2 border-gray-200 peer-checked:border-brand peer-checked:bg-brand-50 transition text-center hover:border-gray-300">
                            <span class="material-symbols-outlined text-gray-400 text-[24px] mb-1">workspace_premium</span>
                            <p class="text-sm font-semibold text-gray-700">1-Year</p>
                            <p class="text-xs text-gray-400 mt-0.5">Subscription</p>
                        </div>
                    </label>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">Contact Name <span class="text-red-400">*</span></label>
                    <input type="text" name="contact_name" required
                        class="w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition"
                        placeholder="Your name">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">Contact Email <span class="text-red-400">*</span></label>
                    <input type="email" name="contact_email" required
                        class="w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition"
                        placeholder="email@company.com">
                </div>
            </div>
        </div>

        <!-- Confirmation -->
        <div class="glass-card rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
            <label class="flex items-start gap-3 cursor-pointer">
                <input type="checkbox" name="confirm_accuracy" required class="w-5 h-5 mt-0.5 text-brand rounded-md focus:ring-brand border-gray-300">
                <span class="text-sm text-gray-600 leading-relaxed">I confirm that all information provided is accurate and understand that pricing may deviate based on the scope of data tracked. Subscriptions are auto-renewable and can be cancelled with 31 days advance notice.</span>
            </label>
        </div>

        <!-- Submit -->
        <div class="flex gap-4">
            <button type="submit"
                class="flex items-center gap-2 stat-gradient-1 hover:opacity-90 text-white font-semibold px-8 py-3 rounded-xl transition shadow-lg shadow-brand-200/30">
                <span class="material-symbols-outlined text-[18px]">check_circle</span>
                Save Client & Create Query
            </button>
            <a href="/"
                class="flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-600 font-medium px-8 py-3 rounded-xl transition">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
let compCount = 1;

function updateProgress() {
    const sections = document.querySelectorAll('.form-section');
    const inputs = document.querySelectorAll('input[required], select[required]');
    let filled = 0;
    inputs.forEach(input => {
        if (input.value && input.value !== '') filled++;
    });
    const pct = Math.min(Math.round((filled / inputs.length) * 100), 100);
    document.getElementById('progressBar').style.width = pct + '%';
    document.getElementById('progressPercent').textContent = pct + '%';
}

function updateKeywordCount(textarea) {
    const lines = textarea.value.split('\n').filter(l => l.trim()).length;
    document.getElementById('keywordCount').textContent = lines;
    updateProgress();
}

document.addEventListener('input', updateProgress);

function addSocialHandle(containerId, platformName, handleName) {
    const container = document.getElementById(containerId);
    const div = document.createElement('div');
    div.className = 'flex gap-2 mb-2';
    div.innerHTML = `
        <select name="${platformName}" class="border border-gray-200 rounded-xl px-3 py-2.5 text-sm bg-white">
            <option value="linkedin">LinkedIn</option><option value="x">X (Twitter)</option><option value="instagram">Instagram</option>
            <option value="facebook">Facebook</option><option value="tiktok">TikTok</option><option value="reddit">Reddit</option>
        </select>
        <input type="text" name="${handleName}" class="flex-1 border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition" placeholder="Handle or URL">
        <button type="button" onclick="this.parentElement.remove()" class="text-red-400 hover:text-red-600 px-2"><span class="material-symbols-outlined text-[18px]">close</span></button>
    `;
    container.appendChild(div);
}

function addCompSocial(btn) {
    const container = btn.previousElementSibling;
    const compIdx = document.querySelectorAll('.competitor-block').length - 1;
    const div = document.createElement('div');
    div.className = 'flex gap-2 mb-2';
    div.innerHTML = `
        <select name="comp_social_platform_${compIdx}[]" class="border border-gray-200 rounded-xl px-2 py-1.5 text-xs bg-white">
            <option value="linkedin">LinkedIn</option><option value="x">X (Twitter)</option><option value="instagram">Instagram</option>
            <option value="facebook">Facebook</option><option value="tiktok">TikTok</option><option value="reddit">Reddit</option>
        </select>
        <input type="text" name="comp_social_handle_${compIdx}[]" class="flex-1 border border-gray-200 rounded-xl px-2 py-1.5 text-xs focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition" placeholder="Handle or URL">
        <button type="button" onclick="this.parentElement.remove()" class="text-red-400 hover:text-red-600 text-xs px-1"><span class="material-symbols-outlined text-[14px]">close</span></button>
    `;
    container.appendChild(div);
}

function addCompetitor() {
    compCount++;
    if (compCount > 50) { alert('Maximum 50 competitors.'); return; }
    const container = document.getElementById('competitors');
    const div = document.createElement('div');
    div.className = 'bg-surface-50 rounded-xl p-5 mb-3 competitor-block border border-gray-100';
    div.innerHTML = `
        <div class="flex items-center justify-between mb-4">
            <span class="inline-flex items-center gap-2 text-sm font-semibold text-gray-600">
                <span class="material-symbols-outlined text-[16px] text-accent">business</span>
                Competitor ${compCount}
            </span>
            <button type="button" onclick="this.closest('.competitor-block').remove()" class="text-red-400 hover:text-red-600"><span class="material-symbols-outlined text-[18px]">delete</span></button>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
            <div><label class="block text-xs font-medium text-gray-500 mb-1">Name</label><input type="text" name="comp_name[]" class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition" placeholder="Competitor name"></div>
            <div><label class="block text-xs font-medium text-gray-500 mb-1">Website *</label><input type="url" name="comp_website[]" required class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition" placeholder="https://competitor.com"></div>
            <div><label class="block text-xs font-medium text-gray-500 mb-1">YouTube URL</label><input type="url" name="comp_youtube[]" class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition" placeholder="https://youtube.com/@channel"></div>
            <div><label class="block text-xs font-medium text-gray-500 mb-1">Vimeo URL</label><input type="url" name="comp_vimeo[]" class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition" placeholder="https://vimeo.com/channel"></div>
            <div class="md:col-span-2"><label class="block text-xs font-medium text-gray-500 mb-1">Review Page URL</label><input type="url" name="comp_review[]" class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition" placeholder="https://trustpilot.com/review/competitor.com"></div>
        </div>
        <div class="mt-3">
            <label class="block text-xs font-medium text-gray-500 mb-1">Social Media Handles</label>
            <div class="comp-socials">
                <div class="flex gap-2 mb-2">
                    <select name="comp_social_platform_${compCount - 1}[]" class="border border-gray-200 rounded-xl px-2 py-1.5 text-xs bg-white">
                        <option value="linkedin">LinkedIn</option><option value="x">X (Twitter)</option><option value="instagram">Instagram</option>
                        <option value="facebook">Facebook</option><option value="tiktok">TikTok</option><option value="reddit">Reddit</option>
                    </select>
                    <input type="text" name="comp_social_handle_${compCount - 1}[]" class="flex-1 border border-gray-200 rounded-xl px-2 py-1.5 text-xs focus:ring-2 focus:ring-brand-200 focus:border-brand outline-none transition" placeholder="Handle or URL">
                </div>
            </div>
            <button type="button" onclick="addCompSocial(this)" class="inline-flex items-center gap-1 text-xs text-brand-light hover:text-brand font-medium"><span class="material-symbols-outlined text-[14px]">add</span>Add handle</button>
        </div>
    `;
    container.appendChild(div);
}

function addCountry() {
    const container = document.getElementById('countries');
    const selects = container.querySelectorAll('select');
    if (selects.length >= 100) { alert('Maximum 100 countries.'); return; }
    const firstSelect = container.querySelector('select');
    const div = document.createElement('div');
    div.className = 'flex gap-2 mb-2';
    div.innerHTML = firstSelect.outerHTML + `<button type="button" onclick="this.parentElement.remove()" class="text-red-400 hover:text-red-600 px-2"><span class="material-symbols-outlined text-[18px]">close</span></button>`;
    container.appendChild(div);
}
</script>
{% endblock %}
